<!DOCTYPE html>
<html lang="tr" class="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Compressed Air Leak Analysis</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/lucide@latest"></script>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
<link rel="icon" href="../favicon.png" type="image/png">

<script>
  tailwind.config = {
    darkMode: 'class', 
    theme: {
      fontFamily: { sans: ['"Plus Jakarta Sans"', 'sans-serif'], mono: ['"JetBrains Mono"', 'monospace'] },
      extend: {
        colors: { slate: { 850: '#151e2e', 900: '#0f172a', 950: '#020617' } },
        animation: { 'blob': 'blob 20s infinite' },
        keyframes: {
            blob: {
                '0%': { transform: 'translate(0px, 0px) scale(1)' },
                '33%': { transform: 'translate(30px, -50px) scale(1.1)' },
                '66%': { transform: 'translate(-20px, 20px) scale(0.9)' },
                '100%': { transform: 'translate(0px, 0px) scale(1)' },
            }
        }
      }
    }
  }
</script>

<style>
  html { scroll-behavior: smooth; }
  body { 
      background: radial-gradient(ellipse at top, #1e1b4b 0%, #0f172a 40%, #020617 100%);
      background-attachment: fixed; color: #f1f5f9; overflow-x: hidden;
  }
  
  /* CAM EFEKTLERÄ° */
  .glass-card { background-color: rgba(30, 41, 59, 0.4); backdrop-filter: blur(16px); border: 1px solid rgba(255, 255, 255, 0.08); transition: all 0.3s ease; }
  .glass-input { border-radius: 0.75rem; padding: 0.75rem; width: 100%; background-color: rgba(15, 23, 42, 0.6); border: 1px solid rgba(255,255,255,0.1); color: white; }
  .glass-input:focus { outline: none; border-color: #3b82f6; background-color: rgba(15, 23, 42, 0.8); }
  .glass-nav { background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(20px); border-bottom: 1px solid rgba(255,255,255,0.08); }

  /* SIDEBAR STÄ°LLERÄ° */
  #sidebar { transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
  .sidebar-link { position: relative; overflow: hidden; }
  .sidebar-link::after { content: ''; position: absolute; bottom: 0; left: 0; width: 0; height: 1px; background: linear-gradient(90deg, transparent, #818cf8, transparent); transition: width 0.3s ease; }
  .sidebar-link:hover::after { width: 100%; }

  .bg-grid { background-size: 60px 60px; background-image: linear-gradient(to right, rgba(255, 255, 255, 0.03) 1px, transparent 1px), linear-gradient(to bottom, rgba(255, 255, 255, 0.03) 1px, transparent 1px); mask-image: radial-gradient(circle at center, black 40%, transparent 80%); pointer-events: none; }

  /* Modal AnimasyonlarÄ± */
  .modal-overlay { opacity: 0; pointer-events: none; transition: all 0.3s ease; }
  .modal-overlay.active { opacity: 1; pointer-events: auto; }
  .modal-content { transform: scale(0.95); opacity: 0; transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1); }
  .modal-overlay.active .modal-content { transform: scale(1); opacity: 1; }

  /* YAZDIRMA (REPORT) Ã–ZEL AYARLARI */
  @media print {
      @page { margin: 0; size: A4 portrait; }
      body { background: white !important; color: black !important; -webkit-print-color-adjust: exact; print-color-adjust: exact; height: 100%; margin: 0; padding: 0; overflow: hidden; }
      .no-print, nav, #sidebar, #backdrop, .glass-card, button, input, .fixed, .absolute, footer, main { display: none !important; }
      #print-area { 
          display: block !important; 
          width: 210mm; min-height: 297mm; 
          position: absolute; top: 0; left: 0; 
          background: white; color: #1e293b; 
          font-family: 'Segoe UI', Helvetica, Arial, sans-serif; 
          z-index: 99999; padding: 20mm; box-sizing: border-box;
      }
      .print-section { page-break-inside: avoid; break-inside: avoid; }
  }
  #print-area { display: none; }
</style>
</head>
<body class="antialiased selection:bg-indigo-500/30 selection:text-white" onload="initApp()">

<div class="fixed inset-0 z-0 pointer-events-none overflow-hidden no-print">
    <div class="absolute inset-0 bg-grid"></div>
    <div class="absolute top-0 -left-1/4 w-[900px] h-[900px] bg-indigo-600/20 rounded-full blur-[120px] animate-blob mix-blend-screen"></div>
    <div class="absolute bottom-0 -right-1/4 w-[900px] h-[900px] bg-cyan-600/10 rounded-full blur-[120px] animate-blob mix-blend-screen" style="animation-delay: 5s;"></div>
</div>

<div id="backdrop" onclick="toggleMenu()" class="fixed inset-0 bg-black/60 backdrop-blur-sm z-[90] hidden transition-opacity duration-300 no-print"></div>
<aside id="sidebar" class="fixed top-0 left-0 h-full w-80 bg-slate-900/90 backdrop-filter backdrop-blur-xl border-r border-white/10 z-[100] transform -translate-x-full shadow-2xl transition-transform duration-300 ease-in-out no-print">
    <div class="p-8 flex flex-col h-full">
        <div class="flex items-center justify-between mb-12">
            <div class="flex items-center gap-3">
                <img src="../icon.jpg" alt="Icon" class="w-8 h-8 rounded-lg shadow-lg shadow-indigo-500/20" onerror="this.style.display='none'">
                <div class="font-bold text-lg text-white">Optimizi.App</div>
            </div>
            <button onclick="toggleMenu()" class="p-2 rounded-full hover:bg-white/10 text-slate-400 hover:text-white transition"><i data-lucide="x" class="w-6 h-6"></i></button>
        </div>
        
        <nav class="flex flex-col gap-6">
            <a href="../index.html" class="sidebar-link text-2xl font-bold text-slate-300 hover:text-white transition group flex items-center gap-4">
                <span class="w-1 h-8 bg-blue-500 rounded-full scale-y-0 group-hover:scale-y-100 transition duration-300"></span>
                <span data-i18n="nav_home">Ana Sayfa</span>
            </a>
            <a href="../tools.html" class="sidebar-link text-2xl font-bold text-slate-300 hover:text-white transition group flex items-center gap-4">
                <span class="w-1 h-8 bg-indigo-500 rounded-full scale-y-0 group-hover:scale-y-100 transition duration-300"></span>
                <span data-i18n="nav_tools">Hesaplama AraÃ§larÄ±</span>
            </a>
            <a href="../contact.html" class="sidebar-link text-2xl font-bold text-slate-300 hover:text-white transition group flex items-center gap-4">
                <span class="w-1 h-8 bg-indigo-500 rounded-full scale-y-0 group-hover:scale-y-100 transition duration-300"></span>
                <span data-i18n="nav_contact">Ä°letiÅŸim</span>
            </a>
            <a href="../blog.html" class="sidebar-link text-2xl font-bold text-slate-300 hover:text-white transition group flex items-center gap-4">
                <span class="w-1 h-8 bg-orange-500 rounded-full scale-y-0 group-hover:scale-y-100 transition duration-300"></span>
                <span data-i18n="nav_blog">Blog</span>
            </a>
        </nav>

        <div class="mt-auto pt-8 border-t border-white/10">
            <div class="text-xs text-slate-500 mb-4 uppercase tracking-wider font-bold" data-i18n="nav_social">Sosyal Medya</div>
            <div class="flex gap-4">
                <a href="https://www.linkedin.com/company/optimizi-app/" target="_blank" class="p-2 bg-white/5 rounded-lg hover:bg-indigo-600 hover:text-white transition text-slate-400"><i data-lucide="linkedin" class="w-5 h-5"></i></a>
                <a href="mailto:contact@optimizi.app" class="p-2 bg-white/5 rounded-lg hover:bg-red-500 hover:text-white transition text-slate-400"><i data-lucide="mail" class="w-5 h-5"></i></a>
            </div>
        </div>
    </div>
</aside>

<div class="relative z-10 flex flex-col min-h-screen">
    <nav class="sticky top-0 z-50 glass-nav transition-all duration-300 no-print">
        <div class="container mx-auto px-6 h-20 flex items-center justify-between">
            <div class="flex items-center gap-6">
                <button onclick="toggleMenu()" class="group p-2 -ml-2 rounded-lg hover:bg-white/5 transition">
                    <div class="space-y-1.5">
                        <span class="block w-6 h-0.5 bg-slate-300 group-hover:bg-white transition-all group-hover:w-5 ml-auto"></span>
                        <span class="block w-6 h-0.5 bg-slate-300 group-hover:bg-white transition-all"></span>
                        <span class="block w-6 h-0.5 bg-slate-300 group-hover:bg-white transition-all group-hover:w-4 ml-0"></span>
                    </div>
                </button>
                <a href="../index.html" class="flex items-center gap-3 group">
                    <img src="../icon.jpg" alt="Icon" class="w-10 h-10 rounded-xl shadow-lg shadow-indigo-500/20 group-hover:scale-105 transition duration-300" onerror="this.style.display='none'">
                    <div class="leading-none">
                        <div class="font-bold text-xl tracking-tight text-white">Optimizi<span class="text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-orange-400">.App</span></div>
                    </div>
                </a>
            </div>
            <div class="flex items-center gap-3">
                <button onclick="toggleLang()" class="flex items-center gap-2 px-4 py-2 rounded-full bg-slate-800/80 hover:bg-slate-700 text-white transition border border-slate-600 shadow-lg shadow-black/20">
                    <span id="langFlag" class="text-base">ğŸ‡¬ğŸ‡§</span><span id="langText" class="text-xs font-bold hidden sm:inline">EN</span>
                </button>
            </div>
        </div>
    </nav>

    <main class="flex-1 container mx-auto p-6 lg:p-8 no-print">
        <div class="flex flex-col lg:flex-row gap-8 items-start">
            
            <div class="w-full lg:w-1/3 space-y-6">
                <div class="glass-card p-6 rounded-2xl border-t-4 border-t-cyan-500">
                    <h3 class="text-cyan-400 text-xs font-bold uppercase mb-6 flex items-center gap-2"><i data-lucide="sliders" class="w-4 h-4"></i> <span data-i18n="param_title">KaÃ§ak Parametreleri</span></h3>
                    
                    <div class="space-y-5">
                        <div>
                            <label class="text-[10px] text-slate-500 font-bold uppercase mb-1 block" data-i18n="label_dia">Delik Ã‡apÄ± (mm)</label>
                            <input type="range" id="diaRange" min="0.5" max="10" step="0.5" value="1" class="w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer mb-2 accent-cyan-500">
                            <div class="relative">
                                <input type="number" id="dia" value="1" step="0.1" min="0.1" class="glass-input text-lg font-bold text-cyan-400 pl-3">
                                <div class="absolute right-3 top-3 text-xs text-slate-600">mm</div>
                            </div>
                        </div>

                        <div>
                            <label class="text-[10px] text-slate-500 font-bold uppercase mb-1 block" data-i18n="label_bar">Hat BasÄ±ncÄ± (bar)</label>
                            <div class="relative">
                                <input type="number" id="bar" value="7" step="0.1" class="glass-input text-lg font-bold text-white pl-3">
                                <div class="absolute right-3 top-3 text-xs text-slate-600">bar (g)</div>
                            </div>
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="text-[10px] text-slate-500 font-bold uppercase mb-1 block" data-i18n="label_hours">Ã‡alÄ±ÅŸma Saati</label>
                                <input type="number" id="hours" value="8000" class="glass-input text-sm">
                            </div>
                            <div>
                                <label class="text-[10px] text-slate-500 font-bold uppercase mb-1 block" data-i18n="label_price">Enerji FiyatÄ±</label>
                                <div class="flex">
                                    <input type="number" id="price" value="3.5" step="0.01" class="glass-input text-sm rounded-r-none border-r-0">
                                    <select id="curr" class="bg-slate-800 text-white text-xs border border-slate-700 rounded-r-lg px-2 focus:outline-none">
                                        <option value="TL">â‚º</option><option value="USD">$</option><option value="EUR">â‚¬</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="glass-card p-4 rounded-xl border border-white/5 bg-slate-900/40">
                    <div class="flex items-start gap-3">
                        <i data-lucide="info" class="w-5 h-5 text-slate-400 mt-0.5"></i>
                        <div>
                            <p class="text-[10px] text-slate-400 leading-relaxed italic" data-i18n="info_text">
                                "Bu sonuÃ§lar mÃ¼hendislik tahminleridir. Kesin veri iÃ§in sahada ultrasonik debimetre Ã¶lÃ§Ã¼mÃ¼ Ã¶nerilir."
                            </p>
                            <button onclick="openModal()" class="mt-3 text-[10px] font-bold text-cyan-500 hover:text-cyan-400 flex items-center gap-1 transition">
                                <i data-lucide="book-open" class="w-3 h-3"></i>
                                <span data-i18n="btn_method">Teknik Metodolojiyi Ä°ncele</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="w-full lg:w-2/3 space-y-6">
                <div class="glass-card p-8 rounded-2xl text-center relative overflow-hidden min-h-[500px] flex flex-col justify-center items-center border-2 border-cyan-500/10">
                    
                    <div class="absolute top-0 right-0 p-12 opacity-[0.03] pointer-events-none text-cyan-500"><i data-lucide="wind" class="w-72 h-72"></i></div>

                    <div class="mb-12 relative z-10 w-full">
                        <div class="flex items-center justify-center gap-2 text-cyan-400 mb-3">
                            <i data-lucide="gauge-circle" class="w-5 h-5"></i>
                            <span class="text-sm font-bold uppercase tracking-[0.2em]" data-i18n="res_title">ANLIK HAVA KAÃ‡AÄI</span>
                        </div>
                        <div class="flex items-baseline justify-center gap-3 bg-slate-900/30 p-6 rounded-3xl border border-cyan-500/20 shadow-[0_0_50px_-12px_rgba(6,182,212,0.3)] max-w-2xl mx-auto w-full">
                            <span class="text-6xl md:text-7xl lg:text-8xl font-black text-transparent bg-clip-text bg-gradient-to-b from-white to-cyan-100 tracking-tighter truncate" id="resFlow">0.00</span>
                            <div class="text-left shrink-0">
                                <div class="text-xl md:text-2xl text-cyan-400 font-bold leading-none">mÂ³/dk</div>
                                <div class="text-xs md:text-sm text-slate-500 font-medium">FAD</div>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 w-full max-w-4xl mb-10 relative z-10">
                        <div class="bg-slate-900/40 p-5 rounded-2xl border border-white/5 flex flex-col justify-center">
                            <div class="text-xs font-bold uppercase text-slate-400 mb-2" data-i18n="res_power">Ekstra GÃ¼Ã§</div>
                            <div class="text-2xl md:text-3xl font-black text-orange-400 truncate"><span id="resPower">0.0</span> <span class="text-lg font-bold text-slate-500">kW</span></div>
                        </div>
                        
                        <div class="bg-slate-900/40 p-5 rounded-2xl border border-white/5 flex flex-col justify-center">
                            <div class="text-xs font-bold uppercase text-slate-400 mb-2" data-i18n="res_vol">YÄ±llÄ±k KayÄ±p</div>
                            <div class="text-2xl md:text-3xl font-black text-blue-400 truncate"><span id="resVol">0</span> <span class="text-lg font-bold text-slate-500">mÂ³</span></div>
                        </div>
                        
                        <div class="bg-slate-900/40 p-5 rounded-2xl border border-white/5 flex flex-col justify-center relative overflow-hidden group">
                             <div class="text-xs font-bold uppercase text-slate-400 mb-2" data-i18n="res_trees">AÄŸaÃ§ EÅŸleniÄŸi</div>
                             <div class="flex items-center gap-2">
                                <i data-lucide="tree-deciduous" class="w-6 h-6 text-green-500"></i>
                                <div class="text-2xl md:text-3xl font-black text-green-400 truncate" id="resTrees">0</div>
                             </div>
                             <div class="text-[10px] text-slate-500 mt-1" data-i18n="res_trees_unit">Adet/YÄ±l KurtarÄ±lan</div>
                        </div>
                    </div>

                    <div class="w-full max-w-4xl bg-gradient-to-br from-red-950/40 to-slate-900/50 border-2 border-red-500/40 p-6 md:p-8 rounded-3xl relative overflow-hidden z-10">
                        <div class="relative flex flex-col md:flex-row items-center justify-between gap-6">
                            <div class="text-center md:text-left shrink-0">
                                <div class="text-sm font-bold uppercase tracking-widest text-red-400 mb-1" data-i18n="card_cost_title">YILLIK MALÄ°YET</div>
                                <div class="text-xs text-red-300/70" data-i18n="card_cost_desc">Bu deliÄŸin faturanÄ±za etkisi.</div>
                            </div>
                            <div class="text-4xl md:text-5xl lg:text-6xl font-black text-white tracking-tighter truncate w-full text-center md:text-right" id="resMoney">0 â‚º</div>
                        </div>
                    </div>
                    
                    <div class="mt-8 flex justify-center w-full max-w-3xl">
                        <button onclick="printReport()" class="flex items-center justify-center gap-3 px-12 py-4 rounded-xl bg-white/5 border border-white/10 hover:bg-white/10 text-white font-bold backdrop-blur-md transition shadow-lg hover:border-white/20 w-full sm:w-auto">
                            <i data-lucide="printer" class="w-5 h-5 text-slate-300"></i>
                            <span data-i18n="btn_report">DetaylÄ± Rapor Al</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>

<div id="methodModal" class="fixed inset-0 z-[100] flex items-center justify-center modal-overlay px-4 no-print">
    <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" onclick="closeModal()"></div>
    <div class="bg-[#0f172a] border border-white/10 w-full max-w-2xl rounded-2xl relative z-10 modal-content shadow-2xl overflow-hidden flex flex-col max-h-[90vh]">
        <div class="p-6 border-b border-white/5 flex justify-between items-center bg-white/5">
            <h3 class="text-white font-bold flex items-center gap-2"><i data-lucide="book-open-check" class="w-5 h-5 text-cyan-400"></i> <span data-i18n="modal_title">Hesaplama Metodolojisi</span></h3>
            <button onclick="closeModal()" class="text-slate-400 hover:text-white"><i data-lucide="x" class="w-6 h-6"></i></button>
        </div>
        <div class="p-8 overflow-y-auto text-slate-300 text-sm leading-relaxed space-y-6">
            <p data-i18n="modal_text_1">Bu hesaplama aracÄ±, endÃ¼striyel basÄ±nÃ§lÄ± hava sistemlerindeki kaÃ§ak debisini belirlemek iÃ§in <strong class="text-white">Termodinamik SÄ±kÄ±ÅŸtÄ±rÄ±labilir AkÄ±ÅŸ</strong> prensiplerini kullanÄ±r. Referans alÄ±nan standartlar: <strong>ISO 1217</strong> ve <strong>CAGI</strong>.</p>
            <div class="bg-slate-900 p-4 rounded-lg border border-cyan-900/30 font-mono text-center text-cyan-300 text-xs">Q â‰ˆ Cáµˆ Â· A Â· (Páµáµƒáµ˜áµáµ‰ + Páµƒáµ—áµ) Â· Kâ‚œ</div>
            <p class="text-xs text-slate-500 mt-2 text-center" data-i18n="modal_text_2">Hesaplamalar Cd=0.61 (Keskin Kenar) ve 20Â°C standart koÅŸullara gÃ¶re yapÄ±lÄ±r.</p>
        </div>
        <div class="p-4 border-t border-white/5 bg-white/5 text-center">
            <button onclick="closeModal()" class="px-6 py-2 bg-slate-700 hover:bg-slate-600 text-white text-xs font-bold rounded-lg transition" data-i18n="btn_close">Kapat</button>
        </div>
    </div>
</div>

<div id="print-area">
    <div style="max-width: 100%; margin: 0 auto;">
        
        <div style="border-bottom: 3px solid #0891b2; padding-bottom: 15px; margin-bottom: 30px; display: flex; justify-content: space-between; align-items: flex-end;">
            <div>
                <h1 style="font-size: 28px; font-weight: 800; margin: 0; color: #0f172a; letter-spacing: -1px;">Optimizi<span style="color: #0891b2;">.App</span></h1>
                <p style="font-size: 13px; color: #64748b; margin-top: 5px;" data-i18n="report_subtitle">Yeni Nesil MÃ¼hendislik HesaplamalarÄ±</p>
            </div>
            <div style="text-align: right;">
                <h2 style="font-size: 16px; font-weight: bold; margin: 0; text-transform: uppercase; color: #334155;" data-i18n="report_title">BasÄ±nÃ§lÄ± Hava KaÃ§ak Raporu</h2>
                <p style="font-size: 12px; color: #94a3b8; margin-top: 5px;"><span data-i18n="report_date">Tarih</span>: <span id="printDate"></span></p>
            </div>
        </div>

        <div style="display: flex; gap: 15px; margin-bottom: 30px;">
            <div style="flex:1; background-color: #f8fafc; border: 1px solid #e2e8f0; padding: 15px; border-radius: 10px;">
                <div style="font-size: 10px; font-weight: bold; color: #64748b; text-transform: uppercase;" data-i18n="report_card_loss">YÄ±llÄ±k KayÄ±p</div>
                <div style="font-size: 20px; font-weight: 800; color: #dc2626; margin-top: 5px;" id="printMoney">0 TL</div>
            </div>
            <div style="flex:1; background-color: #f8fafc; border: 1px solid #e2e8f0; padding: 15px; border-radius: 10px;">
                <div style="font-size: 10px; font-weight: bold; color: #64748b; text-transform: uppercase;" data-i18n="report_card_flow">KaÃ§ak Debisi</div>
                <div style="font-size: 20px; font-weight: 800; color: #0891b2; margin-top: 5px;" id="printFlow">0.00</div>
            </div>
            <div style="flex:1; background-color: #f8fafc; border: 1px solid #e2e8f0; padding: 15px; border-radius: 10px;">
                <div style="font-size: 10px; font-weight: bold; color: #64748b; text-transform: uppercase;" data-i18n="report_card_co2">COâ‚‚ SalÄ±nÄ±mÄ±</div>
                <div style="font-size: 20px; font-weight: 800; color: #16a34a; margin-top: 5px;" id="printCo2">0 ton</div>
            </div>
            <div style="flex:1; background-color: #f0fdf4; border: 1px solid #bbf7d0; padding: 15px; border-radius: 10px;">
                <div style="font-size: 10px; font-weight: bold; color: #166534; text-transform: uppercase;" data-i18n="report_card_trees">AÄŸaÃ§ EÅŸleniÄŸi</div>
                <div style="font-size: 20px; font-weight: 800; color: #15803d; margin-top: 5px;" id="printTrees">0</div>
                <div style="font-size: 9px; color: #166534;" data-i18n="res_trees_unit">Adet/YÄ±l</div>
            </div>
        </div>

        <div style="margin-bottom: 40px;" class="print-section">
            <h3 style="font-size: 14px; font-weight: bold; color: #334155; border-bottom: 2px solid #e2e8f0; padding-bottom: 10px; margin-bottom: 15px;" data-i18n="report_tech_title">Teknik Parametreler</h3>
            <table style="width: 100%; border-collapse: collapse; font-size: 13px;">
                <tbody>
                    <tr style="border-bottom: 1px solid #e2e8f0;">
                        <td style="padding: 10px 0; color: #64748b;" data-i18n="report_row_dia">Tespit Edilen Delik Ã‡apÄ±</td>
                        <td style="padding: 10px 0; font-weight: bold; text-align: right; color: #0f172a;" id="printDia">0 mm</td>
                    </tr>
                    <tr style="border-bottom: 1px solid #e2e8f0;">
                        <td style="padding: 10px 0; color: #64748b;" data-i18n="report_row_bar">Sistem Hat BasÄ±ncÄ±</td>
                        <td style="padding: 10px 0; font-weight: bold; text-align: right; color: #0f172a;" id="printBar">0 bar</td>
                    </tr>
                    <tr style="border-bottom: 1px solid #e2e8f0;">
                        <td style="padding: 10px 0; color: #64748b;" data-i18n="report_row_hours">YÄ±llÄ±k Operasyon SÃ¼resi</td>
                        <td style="padding: 10px 0; font-weight: bold; text-align: right; color: #0f172a;" id="printHours">0 saat</td>
                    </tr>
                    <tr style="border-bottom: 1px solid #e2e8f0;">
                        <td style="padding: 10px 0; color: #64748b;" data-i18n="report_row_power">KompresÃ¶r Ekstra YÃ¼kÃ¼</td>
                        <td style="padding: 10px 0; font-weight: bold; text-align: right; color: #0f172a;" id="printPower">0 kW</td>
                    </tr>
                    <tr style="border-bottom: 1px solid #e2e8f0;">
                        <td style="padding: 10px 0; color: #64748b;" data-i18n="report_row_vol">YÄ±llÄ±k Toplam Hava KaybÄ±</td>
                        <td style="padding: 10px 0; font-weight: bold; text-align: right; color: #0f172a;" id="printVol">0 mÂ³</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div style="margin-top: 50px; padding-top: 20px; border-top: 1px solid #e2e8f0; text-align: center;" class="print-section">
            <p style="font-size: 10px; color: #94a3b8; line-height: 1.5;" data-i18n="report_disclaimer">
                <strong>Yasal UyarÄ±:</strong> Bu rapor, ISO 1217 ve CAGI standartlarÄ±na atÄ±fta bulunarak Keskin KenarlÄ± Orifis (Cd=0.61) modeli ile oluÅŸturulmuÅŸtur. SonuÃ§lar teorik mÃ¼hendislik projeksiyonlarÄ±dÄ±r.
            </p>
            <p style="font-size: 10px; color: #cbd5e1; margin-top: 5px;">
                &copy; 2025 Optimizi.App - TÃ¼m haklarÄ± saklÄ±dÄ±r.
            </p>
        </div>
    </div>
</div>

<script>
    lucide.createIcons();
    
    // --- Ã‡EVÄ°RÄ° SÃ–ZLÃœÄÃœ ---
    const TRANSLATIONS = {
        tr: {
            nav_home: "Ana Sayfa", nav_tools: "Hesaplama AraÃ§larÄ±", nav_contact: "Ä°letiÅŸim", nav_blog: "Blog", nav_social: "Sosyal Medya",
            param_title: "KaÃ§ak Parametreleri", label_dia: "Delik Ã‡apÄ± (mm)", label_bar: "Hat BasÄ±ncÄ± (bar)", label_hours: "Ã‡alÄ±ÅŸma Saati", label_price: "Enerji FiyatÄ±",
            info_text: "\"Bu sonuÃ§lar mÃ¼hendislik tahminleridir. Kesin veri iÃ§in sahada ultrasonik debimetre Ã¶lÃ§Ã¼mÃ¼ Ã¶nerilir.\"",
            btn_method: "Teknik Metodolojiyi Ä°ncele",
            res_title: "ANLIK HAVA KAÃ‡AÄI", res_power: "Ekstra GÃ¼Ã§", res_vol: "YÄ±llÄ±k KayÄ±p", res_trees: "AÄŸaÃ§ EÅŸleniÄŸi", res_trees_unit: "Adet/YÄ±l KurtarÄ±lan",
            card_cost_title: "YILLIK MALÄ°YET", card_cost_desc: "Bu deliÄŸin faturanÄ±za etkisi.",
            btn_report: "DetaylÄ± Rapor Al",
            modal_title: "Hesaplama Metodolojisi",
            modal_text_1: "Bu hesaplama aracÄ±, endÃ¼striyel basÄ±nÃ§lÄ± hava sistemlerindeki kaÃ§ak debisini belirlemek iÃ§in <strong class=\"text-white\">Termodinamik SÄ±kÄ±ÅŸtÄ±rÄ±labilir AkÄ±ÅŸ</strong> prensiplerini kullanÄ±r. Referans alÄ±nan standartlar: <strong>ISO 1217</strong> ve <strong>CAGI</strong>.",
            modal_text_2: "Hesaplamalar Cd=0.61 (Keskin Kenar) ve 20Â°C standart koÅŸullara gÃ¶re yapÄ±lÄ±r.",
            btn_close: "Kapat",
            report_subtitle: "Yeni Nesil MÃ¼hendislik HesaplamalarÄ±", report_title: "BasÄ±nÃ§lÄ± Hava KaÃ§ak Raporu", report_date: "Tarih",
            report_card_loss: "YÄ±llÄ±k KayÄ±p", report_card_flow: "KaÃ§ak Debisi", report_card_co2: "COâ‚‚ SalÄ±nÄ±mÄ±", report_card_trees: "AÄŸaÃ§ EÅŸleniÄŸi",
            report_tech_title: "Teknik Parametreler", report_row_dia: "Tespit Edilen Delik Ã‡apÄ±", report_row_bar: "Sistem Hat BasÄ±ncÄ±", report_row_hours: "YÄ±llÄ±k Operasyon SÃ¼resi",
            report_row_power: "KompresÃ¶r Ekstra YÃ¼kÃ¼", report_row_vol: "YÄ±llÄ±k Toplam Hava KaybÄ±",
            report_disclaimer: "<strong>Yasal UyarÄ±:</strong> Bu rapor, ISO 1217 ve CAGI standartlarÄ±na atÄ±fta bulunarak Keskin KenarlÄ± Orifis (Cd=0.61) modeli ile oluÅŸturulmuÅŸtur. SonuÃ§lar teorik mÃ¼hendislik projeksiyonlarÄ±dÄ±r."
        },
        en: {
            nav_home: "Home", nav_tools: "Calculators", nav_contact: "Contact", nav_blog: "Blog", nav_social: "Social Media",
            param_title: "Leak Parameters", label_dia: "Hole Diameter (mm)", label_bar: "Line Pressure (bar)", label_hours: "Operating Hours", label_price: "Energy Price",
            info_text: "\"These results are engineering estimates. For exact data, on-site measurement with an ultrasonic flow meter is recommended.\"",
            btn_method: "View Methodology",
            res_title: "INSTANT AIR LEAK", res_power: "Extra Power", res_vol: "Annual Loss", res_trees: "Tree Equivalent", res_trees_unit: "Trees/Year Saved",
            card_cost_title: "ANNUAL COST", card_cost_desc: "Impact of this leak on your bill.",
            btn_report: "Get Detailed Report",
            modal_title: "Calculation Methodology",
            modal_text_1: "This tool uses <strong class=\"text-white\">Thermodynamic Compressible Flow</strong> principles to determine leak flow in industrial compressed air systems. Referenced standards: <strong>ISO 1217</strong> and <strong>CAGI</strong>.",
            modal_text_2: "Calculations are based on Cd=0.61 (Sharp Edge) and 20Â°C standard conditions.",
            btn_close: "Close",
            report_subtitle: "Next Gen Engineering Calculations", report_title: "Compressed Air Leak Report", report_date: "Date",
            report_card_loss: "Annual Cost", report_card_flow: "Leak Flow", report_card_co2: "COâ‚‚ Emissions", report_card_trees: "Tree Equivalent",
            report_tech_title: "Technical Parameters", report_row_dia: "Detected Hole Diameter", report_row_bar: "System Line Pressure", report_row_hours: "Annual Operating Hours",
            report_row_power: "Compressor Extra Load", report_row_vol: "Annual Total Air Loss",
            report_disclaimer: "<strong>Disclaimer:</strong> This report is generated using the Sharp-Edged Orifice (Cd=0.61) model referencing ISO 1217 and CAGI standards. Results are theoretical engineering projections."
        }
    };

    let currentLang = 'tr';

    function initApp() {
        // Dil kontrolÃ¼
        const storedLang = localStorage.getItem('lang');
        if (storedLang) { currentLang = storedLang; }
        else {
            const browserLang = navigator.language || navigator.userLanguage;
            currentLang = browserLang.startsWith('tr') ? 'tr' : 'en';
        }
        updateLang();
        
        // Hesaplama baÅŸlat
        calculate();
    }

    function toggleLang() {
        currentLang = currentLang === 'tr' ? 'en' : 'tr';
        localStorage.setItem('lang', currentLang);
        updateLang();
        calculate(); // Birimleri gÃ¼ncellemek iÃ§in tekrar hesapla
    }

    function updateLang() {
        const isTr = currentLang === 'tr';
        document.getElementById('langFlag').innerText = isTr ? 'ğŸ‡¬ğŸ‡§' : 'ğŸ‡¹ğŸ‡·';
        document.getElementById('langText').innerText = isTr ? 'EN' : 'TR';

        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (TRANSLATIONS[currentLang][key]) {
                el.innerHTML = TRANSLATIONS[currentLang][key]; // innerHTML kullandÄ±k ki <strong> taglarÄ± Ã§alÄ±ÅŸsÄ±n
            }
        });
    }

    // Sidebar KontrolÃ¼
    function toggleMenu() {
        const sidebar = document.getElementById('sidebar');
        const backdrop = document.getElementById('backdrop');
        if (sidebar.classList.contains('-translate-x-full')) {
            sidebar.classList.remove('-translate-x-full');
            backdrop.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        } else {
            sidebar.classList.add('-translate-x-full');
            backdrop.classList.add('hidden');
            document.body.style.overflow = 'auto';
        }
    }

    const diaInput = document.getElementById('dia');
    const diaRange = document.getElementById('diaRange');
    
    // Modal
    function openModal() { document.getElementById('methodModal').classList.add('active'); }
    function closeModal() { document.getElementById('methodModal').classList.remove('active'); }
    document.addEventListener('keydown', function(event){ if(event.key === "Escape"){ closeModal(); } });

    // Event Listeners
    diaInput.addEventListener('input', (e) => { diaRange.value = e.target.value; calculate(); });
    diaRange.addEventListener('input', (e) => { diaInput.value = e.target.value; calculate(); });
    ['bar', 'hours', 'price', 'curr'].forEach(id => document.getElementById(id).addEventListener('input', calculate));

    function calculate() {
        const d = parseFloat(diaInput.value) || 0;
        const p = parseFloat(document.getElementById('bar').value) || 0;
        const h = parseFloat(document.getElementById('hours').value) || 0;
        const price = parseFloat(document.getElementById('price').value) || 0;
        const curr = document.getElementById('curr').value;
        const currSym = curr === 'TL' ? 'â‚º' : (curr === 'EUR' ? 'â‚¬' : '$');

        // FormÃ¼l
        let flow = 0.0071 * (d * d) * (p + 1);
        let powerLoss = flow * 6.5; 
        let annualVol = flow * 60 * h;
        let annualCost = powerLoss * h * price;
        let co2 = (powerLoss * h * 0.44) / 1000;
        let trees = Math.round((co2 * 1000) / 20);

        // Ekrana Yaz
        if(document.getElementById('resFlow')) document.getElementById('resFlow').innerText = flow.toFixed(2);
        if(document.getElementById('resPower')) document.getElementById('resPower').innerText = powerLoss.toFixed(1);
        if(document.getElementById('resVol')) document.getElementById('resVol').innerText = Math.round(annualVol).toLocaleString();
        if(document.getElementById('resMoney')) document.getElementById('resMoney').innerText = currSym + " " + Math.round(annualCost).toLocaleString();
        if(document.getElementById('resCo2')) document.getElementById('resCo2').innerText = co2.toFixed(2);
        if(document.getElementById('resTrees')) document.getElementById('resTrees').innerText = trees.toLocaleString();

        // Rapora Yaz (Dil desteÄŸi ile tarih formatÄ±)
        const dateLocale = currentLang === 'tr' ? 'tr-TR' : 'en-US';
        if(document.getElementById('printDate')) document.getElementById('printDate').innerText = new Date().toLocaleDateString(dateLocale);
        
        if(document.getElementById('printMoney')) document.getElementById('printMoney').innerText = currSym + " " + Math.round(annualCost).toLocaleString();
        if(document.getElementById('printFlow')) document.getElementById('printFlow').innerText = flow.toFixed(2) + " mÂ³/dk";
        if(document.getElementById('printCo2')) document.getElementById('printCo2').innerText = co2.toFixed(2) + " ton";
        if(document.getElementById('printTrees')) document.getElementById('printTrees').innerText = trees.toLocaleString();
        
        if(document.getElementById('printDia')) document.getElementById('printDia').innerText = d + " mm";
        if(document.getElementById('printBar')) document.getElementById('printBar').innerText = p + " bar";
        if(document.getElementById('printHours')) document.getElementById('printHours').innerText = h + (currentLang === 'tr' ? " saat" : " hours");
        if(document.getElementById('printPower')) document.getElementById('printPower').innerText = powerLoss.toFixed(1) + " kW";
        if(document.getElementById('printVol')) document.getElementById('printVol').innerText = Math.round(annualVol).toLocaleString() + " mÂ³";
    }

    function printReport() {
        calculate(); 
        setTimeout(() => { window.print(); }, 100);
    }
</script>
</body>
</html>
